(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[15],{5923:function(t,e,n){"use strict";var r=n(4942),i=n(5861),a=n(7757),o=n.n(a);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(){return(u=(0,i.Z)(o().mark((function t(e){var n,r,i,a,s,u,c=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},r=n.timeout,i=void 0===r?16e3:r,a=new AbortController,s=setTimeout((function(){return a.abort()}),i),t.next=6,fetch(e,l(l({},n),{},{signal:a.signal}));case 6:return u=t.sent,clearTimeout(s),t.abrupt("return",u);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}e.Z=function(t){return u.apply(this,arguments)}},2167:function(t,e,n){"use strict";var r=n(3038);var i,a=(i=n(7294))&&i.__esModule?i:{default:i},o=n(1063),s=n(4651),l=n(7426);var u={};function c(t,e,n,r){if(t&&o.isLocalURL(e)){t.prefetch(e,n,r).catch((function(t){0}));var i=r&&"undefined"!==typeof r.locale?r.locale:t&&t.locale;u[e+"%"+n+(i?"%"+i:"")]=!0}}},7426:function(t,e,n){"use strict";var r=n(3038);Object.defineProperty(e,"__esModule",{value:!0}),e.useIntersection=function(t){var e=t.rootMargin,n=t.disabled||!o,l=i.useRef(),u=i.useState(!1),c=r(u,2),f=c[0],d=c[1],h=i.useCallback((function(t){l.current&&(l.current(),l.current=void 0),n||f||t&&t.tagName&&(l.current=function(t,e,n){var r=function(t){var e=t.rootMargin||"",n=s.get(e);if(n)return n;var r=new Map,i=new IntersectionObserver((function(t){t.forEach((function(t){var e=r.get(t.target),n=t.isIntersecting||t.intersectionRatio>0;e&&n&&e(n)}))}),t);return s.set(e,n={id:e,observer:i,elements:r}),n}(n),i=r.id,a=r.observer,o=r.elements;return o.set(t,e),a.observe(t),function(){o.delete(t),a.unobserve(t),0===o.size&&(a.disconnect(),s.delete(i))}}(t,(function(t){return t&&d(t)}),{rootMargin:e}))}),[n,e,f]);return i.useEffect((function(){if(!o&&!f){var t=a.requestIdleCallback((function(){return d(!0)}));return function(){return a.cancelIdleCallback(t)}}}),[f]),[h,f]};var i=n(7294),a=n(3447),o="undefined"!==typeof IntersectionObserver;var s=new Map},953:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return g}});var r=n(5671),i=n(3144),a=n(7326),o=n(136),s=n(6215),l=n(1120),u=n(4942),c=n(7294),f=(n(1664),n(7304),n(5923),n(5893));function d(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function v(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,l.Z)(t);if(e){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var p=function(t){(0,o.Z)(n,t);var e=v(n);function n(t){var i;return(0,r.Z)(this,n),i=e.call(this,t),(0,u.Z)((0,a.Z)(i),"getData",(function(){var t;t="localhost"==window.location.hostname?"http://localhost:4000/":"http://10.0.8.2:4000/",fetch(t+"routines/all").then((function(t){return t.json()})).then((function(t){var e=Object.keys(t);i.setState({all:e,all_data:t})})),fetch(t+"routines/running").then((function(t){return t.json()})).then((function(t){var e=Object.keys(t);i.setState({running:e,running_data:t})}))})),(0,u.Z)((0,a.Z)(i),"update",(function(){i.getData(),i.intervalID=setTimeout(i.update.bind((0,a.Z)(i)),1e3)})),i.intervalID=null,i.state={url:"http://localhost:4000/",all:[],running:[],editing:null,values:{}},i}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){this.update()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.intervalID)}},{key:"findType",value:function(t,e){var n,r=d(this.state.all_data[t]);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.first==e)return i.second}}catch(a){r.e(a)}finally{r.f()}}},{key:"render",value:function(){var t=this,e=[];this.state.running.forEach((function(n){e.push((0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{style:{height:"0.5em"}}),(0,f.jsx)("div",{style:{width:"95%","text-align":"center"},class:"rounded-3xl bg-gray-700 text-xl text-white",children:(0,f.jsx)("div",{style:{width:"95%"},children:(0,f.jsx)("table",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{}),(0,f.jsx)("td",{style:{width:"95%"},children:n.replace(/(.*\.)*/,"")}),(0,f.jsx)("td",{onClick:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,i={method:"POST",headers:{"Content-Type":"text/plain"},body:r.replace(/class /,"")};t.setState({running:t.state.running.filter((function(t){return t!=r}))}),fetch("http://10.0.8.2:4000/routines/stop",i)},style:{width:"5%","text-align":"right",cursor:"pointer"},class:"text-red-600 text-4xl",children:"x"})]})})})})]}))})),0==e.length&&(e="Nothing running!");var n=[];return this.state.all.forEach((function(e){var r=[];if(t.state.editing==e)for(var i=function(){var n=o[a];r.push((0,f.jsxs)("div",{children:[t.state.all_data[e][n].first,"(",t.state.all_data[e][n].second,"):",(0,f.jsx)("input",{class:"text-black",value:t.state.values[n],onChange:function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;if(!t.state.all_data[e][i].second.startsWith("class ")){var a=t.state.values;a[i]=r.target.value,t.setState({values:a})}}})]}))},a=0,o=Object.keys(t.state.all_data[e]);a<o.length;a++)i();n.push((0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{style:{height:"0.5em"}}),(0,f.jsxs)("div",{style:{width:"95%","text-align":"center"},class:"rounded-3xl bg-gray-700 text-xl text-white",children:[(0,f.jsx)("div",{style:{width:"95%"},children:(0,f.jsx)("table",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{}),(0,f.jsx)("td",{style:{width:"95%"},children:e.replace(/(.*\.)*/,"")}),(0,f.jsx)("td",{onClick:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(t.state.running.includes(r))alert("This is already running!");else{for(var i={},a=0,o=Object.keys(t.state.all_data[r]);a<o.length;a++){var s=o[a];i[s]=""}t.setState({editing:r,values:i})}},style:{width:"5%","text-align":"right",cursor:"pointer"},class:"text-green-600 text-4xl",children:"+"})]})})}),t.state.editing==e&&(0,f.jsxs)(f.Fragment,{children:[r,(0,f.jsx)("button",{class:"text-green-600",onClick:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,i=[];console.log(t.state.values);for(var a=0,o=Object.keys(t.state.values);a<o.length;a++){var s=o[a];"int"==t.state.all_data[r][s].second?i.push(parseInt(t.state.values[s])):"double"==t.state.all_data[r][s].second?i.push(parseFloat(t.state.values[s])):i.push(t.state.values[t.state.values[s]])}var l={method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify({classpath:r.replace(/class /,""),args:i})};t.state.running.includes(r)?alert("This is already running!"):(t.setState({editing:null}),fetch("http://10.0.8.2:4000/routines/start",l),t.getData())},children:"Add"})]})]})]}))})),0==n.length&&(n="Nothing to add!"),0==e.length&&(e="Nothing running!"),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{style:{position:"relative",width:"50%",float:"left",height:"100%","z-index":"1010101010"},children:e}),(0,f.jsx)("div",{style:{position:"relative",width:"50%",float:"left",height:"100%","z-index":"1010101010"},children:n})]})}}]),n}(c.Component);function g(){return(0,f.jsx)(p,{})}},8407:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/routines",function(){return n(953)}])},1664:function(t,e,n){n(2167)},5861:function(t,e,n){"use strict";function r(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(u){return void n(u)}s.done?e(l):Promise.resolve(l).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var o=t.apply(e,n);function s(t){r(o,i,a,s,l,"next",t)}function l(t){r(o,i,a,s,l,"throw",t)}s(void 0)}))}}n.d(e,{Z:function(){return i}})}},function(t){t.O(0,[774,888,179],(function(){return e=8407,t(t.s=e);var e}));var e=t.O();_N_E=e}]);